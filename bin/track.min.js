var track,__awaiter=this&&this.__awaiter||function(t,r,e,n){return new(e||(e=Promise))(function(o,i){function a(t){try{s(n.next(t))}catch(t){i(t)}}function c(t){try{s(n.throw(t))}catch(t){i(t)}}function s(t){t.done?o(t.value):new e(function(r){r(t.value)}).then(a,c)}s((n=n.apply(t,r||[])).next())})};!function(t){function r(r,e=2){"object"==typeof r&&(r=JSON.stringify(r));const n={pn:t.projectName,sn:t.skinName,path:window.location.pathname,pid:t.plat_id,cid:t.channel_id,ua:navigator.userAgent,uuid:t.uuid,msg:r,type:e,t:(new Date).getTime()};t.dataError.push({error_data:JSON.stringify(n)})}function e(){for(n();t.dataError.length>0;){const r=t.dataError.shift();r&&t.client_log_v1_error_store(r).then(()=>n()).catch(()=>t.dataError.push(r))}}function n(){window.localStorage.setItem("dataError",JSON.stringify(t.dataError))}t.init=function(n,o,i,a){t.projectName=n,t.skinName=o,t.plat_id=i,t.channel_id=a,t.uuid=window.localStorage.getItem("uuid"),t.uuid||(t.uuid=t.generateUUID()),window.localStorage.setItem("uuid",t.uuid),t.dataError=window.localStorage.getItem("dataError")?JSON.parse(window.localStorage.getItem("dataError")):[],e(),window.onerror=function(t,r,e,n,o){window.dispatchEvent(new ErrorEvent("error",{message:t,url:r,line:e,col:n,error:o}))},window.addEventListener("error",function(t){const{message:n,filename:o,lineno:i,colno:a,error:c}=t;if(n&&c)r({message:n,filename:o,lineno:i,colno:a,error:c},1);else{const{tagName:e,src:o}=t.target;"SCRIPT"===e&&r({message:n||"脚本加载错误",src:o,error:c},1)}e()},!0)},t.pushError=r,t.sendError=e}(track||(track={})),function(t){t.generateUUID=function(){var t=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){var e=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==r?e:3&e|8).toString(16)})},t.getQueryVariable=function(t){let r=window.localStorage.getItem("query");r||(r=window.location.search.substring(1));const e=r.split("&");for(const r of e){const e=r.search("=");if(r.substring(0,e)==t)return r.substr(e+1)}return null},t.isMobile=function(){return navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)},t.isAndroid=function(){return navigator.userAgent.match(/(Android)/i)},t.isIOS=function(){return navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad)/i)}}(track||(track={})),function(t){t.version="1.0.0",t.host="https://clientlogapi.testjj9.com",t.projectName="",t.skinName="",t.uuid="",t.plat_id=0,t.channel_id=0,t.dataError=[],t.dataPoint=[]}(track||(track={})),function(t){t.client_log_v1_error_store=function(r){return __awaiter(this,void 0,void 0,function*(){fetch(`${t.host}/client_log/v1/error/store`,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(r)})})}}(track||(track={}));